<ns-action-bar [title]="sessionTitle"></ns-action-bar>
<GridLayout>
  <StackLayout visibility="{{ loading ? 'visible' : 'collapsed' }}" verticalAlignment="center">
    <ActivityIndicator class="m-t-20" rowSpan="3" busy="true"></ActivityIndicator>
  </StackLayout>
  <StackLayout *ngIf="!loading && session">
    <ScrollView height="100%">
      <StackLayout>
        <StackLayout class="m-x-10">
          <Label [text]="sessionTitle" class="h1 m-t-10" textWrap="true"></Label>
          <Label
            *ngIf="!isFormattedAbstractAvailable"
            [text]="session.abstract"
            class="body m-b-10"
            textWrap="true"
          ></Label>
          <HtmlView
            *ngIf="isFormattedAbstractAvailable"
            nsFixHtmlView
            [html]="session.formatted_abstract"
            class="body m-b-10 htmlview"
          ></HtmlView>
          <GridLayout rows="auto,auto,auto" columns="auto, *">
            <Label text="Raum" class="p-l-15 p-b-10 m-r-20 font-weight-bold" row="2"></Label>
            <Label [text]="session.room" row="2" col="1" class="text p-b-10" textWrap="true"></Label>
          </GridLayout>
          <StackLayout row="1" class="hr-light m-t-15 m-b-15"></StackLayout>
          <Label [text]="labelPresentations" class="h2" textWrap="true"></Label>
        </StackLayout>
        <StackLayout *ngFor="let p of presentations">
          <GridLayout
            columns="*, auto"
            rows="auto, auto"
            class="occasion-item"
            orientation="vertical"
            (tap)="onPresentationTap(p.id)"
          >
            <!-- TODO: On hold: Implement in V0.2 -->
            <!-- <Label
                [text]="getFullName(p.first_name, p.last_name) + concatOrganization(p.organization)"
                class="pre-header"
                textWrap="true"
                ></Label> -->
            <Label col="0" row="0" [text]="p.title" class="h4" textWrap="true"></Label>
            <Label
              col="0"
              row="1"
              [text]="getDuration(p.start, p.end) + concatRoom(p.room)"
              class="body"
              textWrap="true"
            ></Label>
            <Label
              text="&#xf054;"
              col="1"
              rowspan="2"
              class="fa ic-arrow-right goright-icon"
              horizontalAlignment="center"
            ></Label>
          </GridLayout>
        </StackLayout>

        <StackLayout class="m-x-10" *ngIf="speakers && speakers.length > 0">
          <Label text="Speakers" class="h2 m-t-15"></Label>
          <StackLayout *ngFor="let sp of speakers">
            <GridLayout class="list-group-item" rows="auto, *" columns="auto, *" (tap)="onSpeakerTap(sp.id)">
              <Image
                row="0"
                col="0"
                [src]="getPhotoUrlOfSpeaker(sp)"
                class="img-circle"
                rowSpan="2"
                stretch="aspectFill"
                tintColor="#1c7272"
              ></Image>
              <Label
                row="0"
                col="1"
                [text]="sp.first_name + ' ' + sp.last_name"
                textWrap="true"
                class="list-group-item-heading speaker-title"
                verticalAlignment="bottom"
              ></Label>
              <Label row="1" col="1" [text]="sp.position" textWrap="true" class="list-group-item-text"></Label>
            </GridLayout>
          </StackLayout>
        </StackLayout>
      </StackLayout>
    </ScrollView>
  </StackLayout>
</GridLayout>
